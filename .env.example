# Required for transcription
GEMINI_API_KEY=

# Optional override (default: gemini-2.5-flash)
GEMINI_TRANSCRIBE_MODEL=gemini-2.5-flash

# Optional for richer fact-check lookup via Google Fact Check Tools API
GOOGLE_FACT_CHECK_API_KEY=

# Optional for economic claim enrichment via Federal Reserve FRED API
FRED_API_KEY=

# Optional remote renderer endpoint (Takumi-style webhook). If omitted, local SVG fallback is used.
TAKUMI_RENDER_URL=

# Optional timeout for render webhook requests
RENDER_TIMEOUT_MS=5000

# Optional Neon Postgres connection string for durable activity logging
# Example: postgres://user:password@ep-xxxx.us-east-2.aws.neon.tech/dbname?sslmode=verify-full
DATABASE_URL=

# Required when set: clients must send x-control-password header for control endpoints
CONTROL_PASSWORD=

# Server port
PORT=8787
# For AWS host directly (without reverse proxy), set HOST=0.0.0.0
HOST=127.0.0.1

# Chunk size in seconds for transcription requests
CHUNK_SECONDS=12

# Max in-flight fact-check lookups across detected claims
MAX_RESEARCH_CONCURRENCY=3

# Claim detection confidence threshold (0.55-0.9). Higher => fewer, more complete claims.
CLAIM_DETECTION_THRESHOLD=0.62

# Ingest resilience controls for YouTube/live inputs
# true => auto-reconnect on upstream ingest exits/stalls
INGEST_RECONNECT_ENABLED=true
# 0 => infinite retries until manual stop
INGEST_MAX_RETRIES=0
INGEST_RETRY_BASE_MS=1000
INGEST_RETRY_MAX_MS=15000
INGEST_STALL_TIMEOUT_MS=45000
# true => verbose yt-dlp logs for diagnostics
INGEST_VERBOSE_LOGS=false

# When true, require control password for read endpoints (/claims, /events, package/job GETs)
# Defaults to true in production and false in non-production when unset.
PROTECT_READ_ENDPOINTS=false

# Per-IP per-route control/read auth request budget (rolling 60s window)
CONTROL_RATE_LIMIT_PER_MIN=120
